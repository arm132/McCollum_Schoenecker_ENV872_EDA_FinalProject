---
title: "Rorys code"
author: "Aurora"
date: "4/8/2022"
output: html_document
---

```{r setup}
library(tidyverse)
library(lubridate)
library(trend)
library(zoo)
library(Kendall)
library(tseries)

Orange_bird_2010 <- read_csv("~/Desktop/Orange_bird_2010.csv")

Wake_bird_2010 <- read_csv("~/Desktop/Wake_bird_2010.csv")

Durham_bird_2010 <- read_csv("~/Desktop/Durham_bird_2010.csv")
```



```{r select columns and bind}
#columns we want: County, observer ID, Observation date, scientific name, common name, observation count 

Orange_bird_2010$Date<-mdy(Orange_bird_2010$`OBSERVATION DATE`)

Orange_bird_2010_wrangle<- Orange_bird_2010 %>%
  select(`COMMON NAME`, `SCIENTIFIC NAME`, `OBSERVATION COUNT`, `Date`, `OBSERVER ID`, `COUNTY`, `EXOTIC CODE`)

Wake_bird_2010$Date<-mdy(Wake_bird_2010$`OBSERVATION DATE`)
Wake_bird_2010_wrangle<- Wake_bird_2010 %>%
  select(`COMMON NAME`, `SCIENTIFIC NAME`, `OBSERVATION COUNT`, `Date`, `OBSERVER ID`, `COUNTY`, `EXOTIC CODE`)


Durham_bird_2010$Date<-mdy(Durham_bird_2010$`OBSERVATION DATE`)
Durham_bird_2010_wrangle<- Durham_bird_2010 %>%
  select(`COMMON NAME`, `SCIENTIFIC NAME`, `OBSERVATION COUNT`, `Date`, `OBSERVER ID`, `COUNTY`, `EXOTIC CODE`)

all_bird_2010<- rbind(Orange_bird_2010_wrangle, Wake_bird_2010_wrangle, Durham_bird_2010_wrangle, deparse.level = 1, make.row.names=TRUE, stringsAsFactors=FALSE, factor.exclude=TRUE)

```


```{r}

all_bird_2010 <- all_bird_2010 %>%
  mutate(MONTH = month(Date)) %>%
  mutate(YEAR = year(Date)) %>%
  mutate(MY = my(paste0(MONTH,"-",YEAR)))

exotic_counts<-all_bird_2010 %>%
  group_by(COUNTY, YEAR) %>%
  summarize(exotics = length(unique(`EXOTIC CODE`)))

individual_id <- all_bird_2010 %>%
  group_by(COUNTY, YEAR) %>%
  summarize(personal_id=length(unique(`OBSERVER ID`)))

```


```{r}
all_bird.ts <- ts(individual_id$personal_id, start = c(2010,1), frequency = 12)
all.decomp <- stl(all_bird.ts, s.window = "periodic")
plot(all.decomp)
```

```{r Mann Kendall}
wind_data_trend1 <- Kendall::SeasonalMannKendall(wind_data_ts)

all_bird_trend<-Kendall::SeasonalMannKendall(all_bird.ts)

```

